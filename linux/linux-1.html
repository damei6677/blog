<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="任务列表1.内核升降级 0.系统信息查看Ubuntu版本1234567891011#cat &#x2F;proc&#x2F;versionLinux version 4.15.0-54-generic (buildd@lgw01-amd64-014) (gcc version 7.4.0 (Ubuntu 7.4.0-1ubuntu1~18.04.1)) #58-Ubuntu SMP Mon Jun 24 10:55:">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://github.com/damei6677/linux/linux-1.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="任务列表1.内核升降级 0.系统信息查看Ubuntu版本1234567891011#cat &#x2F;proc&#x2F;versionLinux version 4.15.0-54-generic (buildd@lgw01-amd64-014) (gcc version 7.4.0 (Ubuntu 7.4.0-1ubuntu1~18.04.1)) #58-Ubuntu SMP Mon Jun 24 10:55:">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-06-20T05:40:58.989Z">
<meta property="article:modified_time" content="2023-04-19T03:41:08.433Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/blog/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/blog/css/style.css">

  
    
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/blog/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/damei6677"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="page-" class="h-entry article article-type-page" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/linux/linux-1.html" class="article-date">
  <time class="dt-published" datetime="2023-06-20T05:40:58.989Z" itemprop="datePublished">2023-06-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="任务列表"><a href="#任务列表" class="headerlink" title="任务列表"></a>任务列表</h1><p>1.内核升降级</p>
<h1 id="0-系统信息"><a href="#0-系统信息" class="headerlink" title="0.系统信息"></a>0.系统信息</h1><h2 id="查看Ubuntu版本"><a href="#查看Ubuntu版本" class="headerlink" title="查看Ubuntu版本"></a>查看Ubuntu版本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">cat</span> /proc/version</span></span><br><span class="line">Linux version 4.15.0-54-generic (buildd@lgw01-amd64-014) (gcc version 7.4.0 (Ubuntu 7.4.0-1ubuntu1~18.04.1)) #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">cat</span> /etc/issue</span></span><br><span class="line">Ubuntu 15.10 \n \l</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">lsb_release -a</span> </span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID: Ubuntu</span><br><span class="line">Description:    Ubuntu 18.04.1 LTS  #long term support</span><br><span class="line">Release:        18.04				#发行版本号</span><br><span class="line">Codename:       bionic				#代号</span><br></pre></td></tr></table></figure>

<h2 id="设置ubuntu-root用户密码"><a href="#设置ubuntu-root用户密码" class="headerlink" title="设置ubuntu root用户密码"></a>设置ubuntu root用户密码</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd root</span><br></pre></td></tr></table></figure>



<h2 id="内核版本和系统是多少位"><a href="#内核版本和系统是多少位" class="headerlink" title="内核版本和系统是多少位"></a>内核版本和系统是多少位</h2><p>uname</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-a或--all：显示全部的信息；</span><br><span class="line">-m或--machine：显示电脑类型；</span><br><span class="line">-n或-nodename：显示在网络上的主机名称；</span><br><span class="line">-r或--release：显示操作系统的发行编号；</span><br><span class="line">-s或--sysname：显示操作系统名称；</span><br><span class="line">-v：显示操作系统的版本；</span><br><span class="line">-p或--processor：输出处理器类型或&quot;unknown&quot;；</span><br><span class="line">-i或--hardware-platform：输出硬件平台或&quot;unknown&quot;；</span><br><span class="line">-o或--operating-system：输出操作系统名称；</span><br><span class="line">--help：显示帮助；</span><br><span class="line">--version：显示版本信息。</span><br></pre></td></tr></table></figure>

<p>使用举例</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# uname    #单独使用uname命令时相当于uname -s</span><br><span class="line">Linux</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# uname -a</span><br><span class="line">Linux localhost 2.6.18-348.6.1.el5 #1 SMP Tue May 21 15:34:22 EDT 2013 i686 i686 i386 GNU/Linux</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# uname -m</span><br><span class="line">i686</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# uname -n</span><br><span class="line">localhost</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# uname -r</span><br><span class="line">2.6.18-4-686</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# uname -s</span><br><span class="line">Linux</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# uname -v</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1 SMP Tue May 21 15:34:22 EDT 2013</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# uname -p</span><br><span class="line">i686</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# uname -i</span><br><span class="line">i386</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# uname -o</span><br><span class="line">GNU/Linux</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# uname --version</span><br><span class="line">uname (GNU coreutils) 5.97</span><br><span class="line">Copyright (C) 2006 free Software Foundation, Inc.</span><br><span class="line">这是自由软件。您可以按照 GNU GPL 协议 &lt;http://www.gnu.org/licenses/gpl.html&gt; 的条款再发布此软件的副本，但我们无法保证相关法律不对这一情形进行限制。</span><br><span class="line"></span><br><span class="line">由 David MacKenzie 编写。</span><br></pre></td></tr></table></figure>



<h2 id="内核版本编辑器版本"><a href="#内核版本编辑器版本" class="headerlink" title="内核版本编辑器版本"></a>内核版本编辑器版本</h2><p> cat &#x2F;proc&#x2F;version </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Linux version 4.15.0-46-generic (buildd@lgw01-amd64-038) (gcc version 7.3.0 (Ubuntu 7.3.0-16ubuntu3)) #49-Ubuntu SMP Wed Feb 6 09:33:07 UTC 2019</span><br></pre></td></tr></table></figure>

<h1 id="0-1-修改当前主机名"><a href="#0-1-修改当前主机名" class="headerlink" title="0.1 修改当前主机名"></a>0.1 修改当前主机名</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看当前主机名</span></span><br><span class="line">hostname</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改主机名</span></span><br><span class="line">sudo hostnamectl set-hostname &lt;newhostname&gt;</span><br></pre></td></tr></table></figure>



<h1 id="1-环境变量配置文件"><a href="#1-环境变量配置文件" class="headerlink" title="1.环境变量配置文件"></a>1.环境变量配置文件</h1><p> 以下为环境变量配置文件(Ubuntu16.04) </p>
<p> &#x2F;etc&#x2F;profile<br> 用于设置系统级的环境变量和启动程序，在这个文件下配置会对所有用户生效。当用户登录(login)时，文件会被执行，并从&#x2F;etc&#x2F;profile.d目录的配置文件中查找shell设置。如果对&#x2F;etc&#x2F;profile修改的话必须重启才会生效.(source &#x2F;etc&#x2F;profile 命令) </p>
<p> &#x2F;etc&#x2F;bash.bashrc<br> 每一个运行bash shell的用户执行此文件.当bash shell被打开时,该文件被读取。如果想对所有使用bash的用户修改某个配置并在以后打开的bash都生效的话可以修改这个文件，修改之后不用重启，重新打开一个bash即可生效。 </p>
<p> ~&#x2F;.profile<br> 每个用户都可使用该文件输入专用于自己使用的shell信息,当用户登录时,该文件仅仅执行一次!默认情况下,他设置一些环境变量,执行用户的.bashrc文件. </p>
<p> ~&#x2F;.bashrc<br> 该文件包含专用于你的bash shell的bash信息,当登录时以及每次打开新的shell时,该该文件被读取. </p>
<p> ~&#x2F;.bash_logout<br> 当每次退出系统(退出bash shell)时,执行该文件，通常存放清理工作的命令。 </p>
<h2 id="执行顺序"><a href="#执行顺序" class="headerlink" title="执行顺序"></a>执行顺序</h2><p> 登陆shell<br> 登陆shell时，首先执行&#x2F;etc&#x2F;profile，之后执行用户目录下的<del>&#x2F;.profile,</del>&#x2F;.profile中会执行~&#x2F;.bashrc。 </p>
<h3 id="可执行文件添加到环境变量"><a href="#可执行文件添加到环境变量" class="headerlink" title="可执行文件添加到环境变量"></a>可执行文件添加到环境变量</h3><p> vim &#x2F;etc&#x2F;profile </p>
<p> export PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;bin:$PATH </p>
<p> source &#x2F;etc&#x2F;profile </p>
<h2 id="动态库"><a href="#动态库" class="headerlink" title="动态库"></a>动态库</h2><h3 id="ldconfig-搜索路径"><a href="#ldconfig-搜索路径" class="headerlink" title="ldconfig 搜索路径"></a>ldconfig 搜索路径</h3><p> 参考：<a target="_blank" rel="noopener" href="http://man.linuxde.net/ldconfig">http://man.linuxde.net/ldconfig</a><br> <a target="_blank" rel="noopener" href="https://blog.csdn.net/chenzixun0/article/details/56278632">https://blog.csdn.net/chenzixun0/article/details/56278632</a><br> 主要是在默认搜寻目录&#x2F;lib和&#x2F;usr&#x2F;lib以及动态库配置文件&#x2F;etc&#x2F;ld.so.conf内所列的目录下，搜索出可共享的动态链接库（格式如lib.so）,进而创建出动态装入程序(ld.so)所需的连接和缓存文件，缓存文件默认为&#x2F;etc&#x2F;ld.so.cache，此文件保存已排好序的动态链接库名字列表。linux下的共享库机制采用了类似高速缓存机制，将库信息保存在&#x2F;etc&#x2F;ld.so.cache，程序连接的时候首先从这个文件里查找，然后再到ld.so.conf的路径中查找。为了让动态链接库为系统所共享，需运行动态链接库的管理命令ldconfig，此执行程序存放在&#x2F;sbin目录下。 </p>
<p> ldconfig命令参数：<br> -v或–verbose:ldconfig将显示正在扫描的目录及搜索到的动态链接库,还有它所创建的连接的名字<br> -f CONF：此选项指定动态链接库的配置文件为CONF，系统默认为&#x2F;etc&#x2F;ld.so.conf<br> -p或–print-cache：此选项指示ldconfig打印出当前缓存文件所保存的所有共享库的名字。<br> -V：此选项打印出ldconfig的版本信息，而后退出。<br> 从以上可知： </p>
<p> 在&#x2F;lib和&#x2F;usr&#x2F;lib里面添加库文件，是无需将路径添加到&#x2F;etc&#x2F;ld.so.conf中去的，但是需要使用命令sudo ldconfig,否则无法找到库文件。在上述两个目录之外的路径添加库文件，需要先将将库文件的路径追加入&#x2F;etc&#x2F;ld.so.conf，假设库文件在&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib中，可以使用命令：<br> echo “&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib” &gt;&gt; &#x2F;etc&#x2F;ld.so.conf<br> sudo ldconfig -v | grep mysql  # 查看mysql库文件是否被找到。<br> 1<br> 2<br> 若在&#x2F;lib和&#x2F;usr&#x2F;lib之外的目录中添加库文件，而又不在&#x2F;etc&#x2F;ld.so.conf中写入路径，此时可以用添加环境变量LD_LIBRARY_PATH的做法让系统识别到库文件。<br> export LD_LIBRARY_PATH&#x3D;$LD_LIBRARY_PATH:&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib<br> 1<br> 可以在&#x2F;etc&#x2F;ld.so.conf.d&#x2F;目录下创建.conf文件来添加库路径。在默认的&#x2F;etc&#x2F;ld.so.conf文件中，可以看到有如下内容：<br> include &#x2F;etc&#x2F;ld.so.conf.d&#x2F; .conf<br> 1<br> 说明&#x2F;etc&#x2F;ld.so.conf.d&#x2F;目录下所有的.conf文件都被包含，文件中所有的路径都会被搜索到。<br> 例如： </p>
<p> touch opencv.conf<br> echo “&#x2F;user&#x2F;local&#x2F;lib” &gt; opencv.conf<br> sudo ldconfig </p>
<h3 id="可执行文件打包"><a href="#可执行文件打包" class="headerlink" title="可执行文件打包"></a>可执行文件打包</h3><p> 1、ldd softname查看可执行文件依赖的动态库<br> 2、find &#x2F; -name   .so找到动态库的位置，并且将so库拷贝到可执行文件同一目录下。<br> 3、&#x2F;etc&#x2F;ld.so.conf文件记录了可执行文件运行时查找so库的路径，并且&#x2F;etc&#x2F;ld.so.conf.d目录中保存的是所有可以子配置文件。注意文件结尾时.conf。<br> 将可执行文件当前路径添加到其中合适位置。<br> 4、执行ldconfig(&#x2F;sbin&#x2F;ldconfig)，使修改生效。 </p>
<h1 id="2-新建用户"><a href="#2-新建用户" class="headerlink" title="2.新建用户"></a>2.新建用户</h1><h2 id="2-0-adduser"><a href="#2-0-adduser" class="headerlink" title="2.0 adduser"></a>2.0 adduser</h2><p> 使用adduser命令，不要使用useradd命令。 </p>
<p> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/sparkdev/p/5823353.html">https://www.cnblogs.com/sparkdev/p/5823353.html</a> </p>
<p> 删除用户userdel。 </p>
<p> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/DaDaOnline/p/5527833.html">https://www.cnblogs.com/DaDaOnline/p/5527833.html</a> </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-c：加上备注文字，备注文字保存在passwd的备注栏中。</span><br><span class="line">-d：指定用户登入时的主目录，替换系统默认值/home/&lt;用户名&gt;</span><br><span class="line">-D：变更预设值。</span><br><span class="line">-e：指定账号的失效日期，日期格式为MM/DD/YY，例如06/30/12。缺省表示永久有效。</span><br><span class="line">-f：指定在密码过期后多少天即关闭该账号。如果为0账号立即被停用；如果为-1则账号一直可用。默认值为-1.</span><br><span class="line">-g：指定用户所属的群组。值可以使组名也可以是GID。用户组必须已经存在的，期默认值为100，即users。</span><br><span class="line">-G：指定用户所属的附加群组。</span><br><span class="line">-m：自动建立用户的登入目录。</span><br><span class="line">-M：不要自动建立用户的登入目录。</span><br><span class="line">-n：取消建立以用户名称为名的群组。</span><br><span class="line">-r：建立系统账号。</span><br><span class="line">-s：指定用户登入后所使用的shell。默认值为/bin/bash。</span><br><span class="line">-u：指定用户ID号。该值在系统中必须是唯一的。0~499默认是保留给系统用户账号使用的，所以该值必须大于499。</span><br></pre></td></tr></table></figure>

<h3 id="使用举例"><a href="#使用举例" class="headerlink" title="使用举例"></a>使用举例</h3><p>   Case 1  : 创建一个带有家目录并且可以登录 bash 的用户 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo useradd -m -s /bin/bash tester1</span></span><br></pre></td></tr></table></figure>

<p>   Case 2  : 指定创建用户家目录的路径 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo useradd -m -d /home/xxx tester2</span><br></pre></td></tr></table></figure>

<p> &#x2F;home&#x2F;xxx目录会被创建。 </p>
<p>   Case 3  : 创建一个没有家目录且不能登录的用户 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo useradd -s /sbin/nologin tester3</span><br></pre></td></tr></table></figure>

<p>   Case 4  : 创建时把用户加入不同的用户组 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo useradd -m -G xxx,sudo tester4</span><br></pre></td></tr></table></figure>

<p> 注意过个组名使用逗号分隔，不能有空格。 </p>
<h3 id="创建密码"><a href="#创建密码" class="headerlink" title="创建密码"></a>创建密码</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd tester</span><br></pre></td></tr></table></figure>

<h3 id="用户添加管理员权限"><a href="#用户添加管理员权限" class="headerlink" title="用户添加管理员权限"></a>用户添加管理员权限</h3><p> 将用户添加到&#x2F;etc&#x2F;suders文件中 </p>
<h2 id="2-1-删除用户userdel"><a href="#2-1-删除用户userdel" class="headerlink" title="2.1 删除用户userdel"></a>2.1 删除用户userdel</h2><p> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/DaDaOnline/p/5527833.html">https://www.cnblogs.com/DaDaOnline/p/5527833.html</a> </p>
<ul>
<li>使用-r命令会删除用户的家目录 </li>
<li>-f 选项来强制删除用户</li>
</ul>
<h2 id="2-2-添加用户到组"><a href="#2-2-添加用户到组" class="headerlink" title="2.2 添加用户到组"></a>2.2 添加用户到组</h2><p> usermod<br> 1.-c&lt;备注&gt; 加上备注文字。备注文字会保存在passwd的备注栏位中。<br>2.-d&lt;登入目录&gt; 指定用户登入时的启始目录。<br>3.-D 　变更预设值．<br>4.-e&lt;有效期限&gt; 指定帐号的有效期限。<br>5.-f&lt;缓冲天数&gt; 指定在密码过期后多少天即关闭该帐号。<br>6.-g&lt;群组&gt; 指定用户所属的群组。<br>7.-G&lt;群组&gt; 指定用户所属的附加群组。<br>8.-m 　自动建立用户的登入目录。<br>9.-M 　不要自动建立用户的登入目录。<br>10.-n 　取消建立以用户名称为名的群组．<br>11.-r 　建立系统帐号。<br>12.-s　 　指定用户登入后所使用的shell。<br>13.-u 　指定用户ID。  </p>
<p> usermod -g 用户组 用户名<br> 强行设置某个用户所在组<br> usermod -G 用户组 用户名<br> 把某个用户改为 group(s)<br> usermod -a -G 用户组 用户名<br> 把用户添加进入某个组(s）<br> 举例：<br> 调试串口时，遇到提示，打开串口没有权限。需要将当前用户加入到dialout分组中<br> usermod -aG {group-name} username<br> usermod -aG dialout xing </p>
<h1 id="3-常用命令及软件"><a href="#3-常用命令及软件" class="headerlink" title="3.常用命令及软件"></a>3.常用命令及软件</h1><h2 id="3-1-service"><a href="#3-1-service" class="headerlink" title="3.1 service"></a>3.1 service</h2><p> 获取当前的服务列表：<br> service –status-all<br> 网络服务<br> CentOS &#x2F; RHEL &#x2F; Red Hat &#x2F; Fedora<br> service network stop<br> service network start<br> service network restart<br> Ubuntu&#x2F;Debian<br> service networking stop<br> service networking start<br> service networking restart<br> apt-get<br> 配置修改<br> Root权限修改&#x2F;etc&#x2F;apt&#x2F;sources.list配置文件<br> 查看已经安装的软件<br> apt list –installed<br> dpkg -l<br> 搜索软件<br>  apt-cache search softname<br> 卸载<br> 卸载mysql<br> sudo apt-get –purge remove mysql-server<br> sudo apt-get –purge remove mysql-client<br> sudo apt-get –purge remove mysql-common </p>
<p> 最后再通过下面的命令清理残余，代码如下: </p>
<p> apt-get autoremove<br> apt-get autoclean<br> rm &#x2F;etc&#x2F;mysql&#x2F; -R<br> rm &#x2F;var&#x2F;lib&#x2F;mysql&#x2F; -R<br> 常用软件安装<br> apt install ssh-server<br> apt install mariadb-server </p>
<h3 id="3-1-2-使用举例"><a href="#3-1-2-使用举例" class="headerlink" title="3.1.2 使用举例"></a>3.1.2 使用举例</h3><h4 id="sshd"><a href="#sshd" class="headerlink" title="sshd"></a>sshd</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo service sshd status</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装</span></span><br><span class="line">sudo yum install sshd</span><br><span class="line">sudo apt install opensshd-server </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">开启服务</span></span><br><span class="line">sudo service sshd start</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">卸载服务</span></span><br><span class="line">sudo yum remove sshd</span><br><span class="line">sudo apt -purge remove sshd</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ubuntu12.04 安装ssh</span></span><br><span class="line">apt-get install openssh-server #ubuntu12.04</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="3-2-cp"><a href="#3-2-cp" class="headerlink" title="3.2 cp"></a>3.2 cp</h2><p> -a：此参数的效果和同时指定”-dpR”参数相同；<br> -d：当复制符号连接时，把目标文件或目录也建立为符号连接，并指向与源文件或目录连接的原始文件或目录；<br> -f：强行复制文件或目录，不论目标文件或目录是否已存在；<br> -i：覆盖既有文件之前先询问用户；<br> -l：对源文件建立硬连接，而非复制文件；<br> -p：保留源文件或目录的属性；<br> -R&#x2F;r：递归处理，将指定目录下的所有文件与子目录一并处理；<br> -s：对源文件建立符号连接，而非复制文件；<br> -u：使用这项参数后只会在源文件的更改时间较目标文件更新时或是名称相互对应的目标文件并不存在时，才复制文件；<br> -S：在备份文件时，用指定的后缀“SUFFIX”代替文件的默认后缀；<br> -b：覆盖已存在的文件目标前将目标文件备份；<br> -v：详细显示命令执行的操作。 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">复制文件</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将文件file复制到目录/usr/men/tmp下，并改名为file1</span></span><br><span class="line">cp file /usr/men/tmp/file1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">复制文件夹</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">假设复制源目录 为 dir1 ,目标目录为dir2，怎样才能将dir1下所有文件复制到dir2下。</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">如果dir2目录不存在，则可以直接使用</span></span><br><span class="line">cp -r dir1 dir2</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">如果dir2目录已存在，则需要使用</span></span><br><span class="line">cp -r dir1/. dir2</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">如果这时使用<span class="built_in">cp</span> -r dir1 dir2,则也会将dir1目录复制到dir2中，明显不符合要求。</span></span><br></pre></td></tr></table></figure>





<p> 串口<br> 查看系统中已经开启的串口<br> 串口设备都在&#x2F;dev目录下，一般的名字是ttyS0,ttyS1…<br> （1）使用root用户，查看当前系统中已经开启的串口文件名称。<br> dmesg | grep ttyS </p>
<p> dmesg是一种程序，用于检测和控制内核环缓冲。程序用来帮助用户了解系统的启动信息。 </p>
<p> （2）如果当前用户希望使用串口，需要把当前用户添加到dialout用户组中，<br> 首先查看当前用户已经加入的分组情况。<br> cat &#x2F;etc&#x2F;group | grep username<br> 如果当前用户没有加入dialout用户组，使用下面命令添加，<br> usermod -aG dialout xing<br> （3）在串口的一端发送字符，在另一端使用工具进行接收。<br> echo 234 &gt; &#x2F;dev&#x2F;ttyS0 </p>
<h2 id="3-3-mv"><a href="#3-3-mv" class="headerlink" title="3.3 mv"></a>3.3 mv</h2><ul>
<li>-i: 若指定目录已有同名文件，则先询问是否覆盖旧文件; </li>
<li>-f: 在mv操作要覆盖某已有的目标文件时不给任何指示;</li>
</ul>
<table>
<thead>
<tr>
<th>命令格式</th>
<th>运行结果</th>
</tr>
</thead>
<tbody><tr>
<td>mv 文件名 文件名</td>
<td>将源文件名改为目标文件名</td>
</tr>
<tr>
<td>mv 文件名 目录名</td>
<td>将文件移动到目标目录</td>
</tr>
<tr>
<td>mv 目录名 目录名</td>
<td>目标目录已存在，将源目录 移动到目标目录；目标 目录不存在则改名</td>
</tr>
<tr>
<td>mv 目录名 文件名</td>
<td>出错</td>
</tr>
</tbody></table>
<p>**使用举例 **</p>
<p> 将文件 aaa 更名为 bbb : </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv aaa bbb</span><br></pre></td></tr></table></figure>

<p> 将info目录放入logs目录中。注意，如果logs目录不存在，则该命令将info改名为logs。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv info/ logs </span><br></pre></td></tr></table></figure>

<p> 再如将&#x2F;usr&#x2F;student下的所有文件和目录移到当前目录下，命令行为： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mv /usr/student/   . </span><br></pre></td></tr></table></figure>



<h2 id="3-4-sudo"><a href="#3-4-sudo" class="headerlink" title="3.4 sudo"></a>3.4 sudo</h2><p>​	 sudo是Linux系统管理指令，是允许系统管理员让普通用户执行一些或者全部root命令的一个工具。Linux系统下，为了安全，一般来说我们操作都是在普通用户下操作，但是有时候普通用户需要使用root权限，比如在安装软件的时候。这个时候如果我们切回root用户下效率就会比较低，所以用sudo命令就会很方便。 </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 安装</span><br><span class="line"><span class="meta">#yum install sudo</span></span><br><span class="line"><span class="number">1.1</span> 配置文件是只读类型，先添加写权限</span><br><span class="line"><span class="meta">#chmod +w /etc/sudoers</span></span><br><span class="line"><span class="number">1.2</span> 收回写权限</span><br><span class="line"><span class="meta">#chmod -w /etc/sudoers</span></span><br><span class="line"><span class="number">2</span> 修改配置文件</span><br><span class="line"><span class="meta">#vim /etc/sudoers</span></span><br><span class="line"><span class="number">3</span> 添加 </span><br><span class="line">username ALL=(ALL) ALL</span><br></pre></td></tr></table></figure>

<h2 id="3-5-ps"><a href="#3-5-ps" class="headerlink" title="3.5 ps"></a>3.5 ps</h2><p>​	  ps命令用于报告当前系统的进程状态。   可以搭配<a target="_blank" rel="noopener" href="http://man.linuxde.net/kill">kill</a>指令随时中断、删除不必要的程序。ps命令是最基本同时也是非常强大的进程查看命令，使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等，总之大部分信息都是可以通过执行该命令得到的。 </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-A 显示所有进程（等价于-e）(utility)</span><br><span class="line">-a 显示一个终端的所有进程，除了会话引线</span><br><span class="line">-N 忽略选择。</span><br><span class="line">-d 显示所有进程，但省略所有的会话引线(utility)</span><br><span class="line">-x 显示没有控制终端的进程，同时显示各个命令的具体路径。dx不可合用。（utility）</span><br><span class="line">-p pid 进程使用cpu的时间</span><br><span class="line">-u uid or username 选择有效的用户id或者是用户名</span><br><span class="line">-g gid or groupname 显示组的所有进程。</span><br><span class="line">U username 显示该用户下的所有进程，且显示各个命令的详细路径。如:ps U zhang;(utility)</span><br><span class="line">-f 全部列出，通常和其他选项联用。如：ps -fa or ps -fx and so on.</span><br><span class="line">-l 长格式（有F,wchan,C 等字段）</span><br><span class="line">-j 作业格式</span><br><span class="line">-o 用户自定义格式。</span><br><span class="line">v 以虚拟存储器格式显示</span><br><span class="line">s 以信号格式显示</span><br><span class="line">-m 显示所有的线程</span><br><span class="line">-H 显示进程的层次(和其它的命令合用，如：ps -Ha)（utility）</span><br><span class="line">e 命令之后显示环境（如：ps -d e; ps -a e）(utility)</span><br><span class="line">h 不显示第一行</span><br></pre></td></tr></table></figure>

<p>​	 ps命令常用用法 </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>）ps a 显示现行终端机下的所有程序，包括其他用户的程序。</span><br><span class="line"><span class="number">2</span>）ps -A 显示所有进程。</span><br><span class="line"><span class="number">3</span>）ps c 列出程序时，显示每个程序真正的指令名称，而不包含路径，参数或常驻服务的标示。</span><br><span class="line"><span class="number">4</span>）ps -e 此参数的效果和指定<span class="string">&quot;A&quot;</span>参数相同。</span><br><span class="line"><span class="number">5</span>）ps e 列出程序时，显示每个程序所使用的环境变量。</span><br><span class="line"><span class="number">6</span>）ps f 用ASCII字符显示树状结构，表达程序间的相互关系。</span><br><span class="line"><span class="number">7</span>）ps -H 显示树状结构，表示程序间的相互关系。</span><br><span class="line"><span class="number">8</span>）ps -N 显示所有的程序，除了执行ps指令终端机下的程序之外。</span><br><span class="line"><span class="number">9</span>）ps s 采用程序信号的格式显示程序状况。</span><br><span class="line"><span class="number">10</span>）ps S 列出程序时，包括已中断的子程序资料。</span><br><span class="line"><span class="number">11</span>）ps -t&lt;终端机编号&gt; 　指定终端机编号，并列出属于该终端机的程序的状况。</span><br><span class="line"><span class="number">12</span>）ps u 　以用户为主的格式来显示程序状况。</span><br><span class="line"><span class="number">13</span>）ps x 　显示所有程序，不以终端机来区分。</span><br></pre></td></tr></table></figure>

<p> 常用ps aux查看信息 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root:# ps aux</span><br><span class="line">USER      PID       %CPU    %MEM    VSZ    RSS    TTY    STAT    START    TIME    COMMAND</span><br><span class="line">smmsp    3521    0.0    0.7    6556    1616    ?    Ss    20:40    0:00    sendmail: Queue runner@01:00:00 f</span><br><span class="line">root    3532    0.0    0.2    2428    452    ?    Ss    20:40    0:00    gpm -m /dev/input/mice -t imps2</span><br><span class="line">htt    3563    0.0    0.0    2956    196    ?    Ss    20:41    0:00    /usr/sbin/htt -retryonerror 0</span><br><span class="line">htt    3564    0.0    1.7    29460    3704    ?    Sl    20:41    0:00    htt_server -nodaemon</span><br><span class="line">root    3574    0.0    0.4    5236    992    ?    Ss    20:41    0:00    crond</span><br><span class="line">xfs    3617    0.0    1.3    13572    2804    ?    Ss    20:41    0:00    xfs -droppriv -daemon</span><br><span class="line">root    3627    0.0    0.2    3448    552    ?    SNs    20:41    0:00    anacron -s</span><br><span class="line">root    3636    0.0    0.1    2304    420    ?    Ss    20:41    0:00    /usr/sbin/atd</span><br><span class="line">dbus    3655    0.0    0.5    13840    1084    ?    Ssl    20:41    0:00    dbus-daemon-1 --system</span><br></pre></td></tr></table></figure>

<p> head表头 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">USER    用户名</span><br><span class="line">UID    用户ID（User ID）</span><br><span class="line">PID    进程ID（Process ID）</span><br><span class="line">PPID    父进程的进程ID（Parent Process id）</span><br><span class="line">SID    会话ID（Session id）</span><br><span class="line">%CPU    进程的cpu占用率</span><br><span class="line">%MEM    进程的内存占用率</span><br><span class="line">VSZ    进程所使用的虚存的大小（Virtual Size）</span><br><span class="line">RSS    进程使用的驻留集大小或者是实际内存的大小，Kbytes字节。</span><br><span class="line">TTY    与进程关联的终端（tty）</span><br><span class="line">STAT    进程的状态：进程状态使用字符表示的（STAT的状态码）</span><br><span class="line">R 运行    Runnable (on run queue)            正在运行或在运行队列中等待。</span><br><span class="line">S 睡眠    Sleeping                休眠中, 受阻, 在等待某个条件的形成或接受到信号。</span><br><span class="line">I 空闲    Idle</span><br><span class="line">Z 僵死    Zombie（a defunct process)        进程已终止, 但进程描述符存在, 直到父进程调用wait4()系统调用后释放。</span><br><span class="line">D 不可中断    Uninterruptible sleep (ususally IO)    收到信号不唤醒和不可运行, 进程必须等待直到有中断发生。</span><br><span class="line">T 终止    Terminate                进程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信号后停止运行运行。</span><br><span class="line">P 等待交换页</span><br><span class="line">W 无驻留页    has no resident pages        没有足够的记忆体分页可分配。</span><br><span class="line">X 死掉的进程</span><br><span class="line">&lt; 高优先级进程                    高优先序的进程</span><br><span class="line">N 低优先    级进程                    低优先序的进程</span><br><span class="line">L 内存锁页    Lock                有记忆体分页分配并缩在记忆体内</span><br><span class="line">s 进程的领导者（在它之下有子进程）；</span><br><span class="line">l 多进程的（使用 CLONE_THREAD, 类似 NPTL pthreads）</span><br><span class="line">+ 位于后台的进程组 </span><br><span class="line">START    进程启动时间和日期</span><br><span class="line">TIME    进程使用的总cpu时间</span><br><span class="line">COMMAND    正在执行的命令行命令</span><br><span class="line">NI    优先级(Nice)</span><br><span class="line">PRI    进程优先级编号(Priority)</span><br><span class="line">WCHAN    进程正在睡眠的内核函数名称；该函数的名称是从/root/system.map文件中获得的。</span><br><span class="line">FLAGS    与进程相关的数字标识</span><br></pre></td></tr></table></figure>

<h2 id="3-6"><a href="#3-6" class="headerlink" title="3.6"></a>3.6</h2><h2 id="3-7-tar"><a href="#3-7-tar" class="headerlink" title="3.7 tar"></a>3.7 tar</h2><p> -c: 建立压缩档案<br> -x：解压<br> -t：查看内容<br> -r：向压缩归档文件末尾追加文件<br> -u：更新原压缩包中的文件 </p>
<p> 这五个是独立的命令，压缩解压都要用到其中一个，可以和别的命令连用但只能用其中一个。下面的参数是根据需要在压缩或解压档案时可选的。 </p>
<p> -z：有gzip属性的<br> -j：有bz2属性的<br> -Z：有compress属性的<br> -v：显示所有过程<br> -O：将文件解开到标准输出 </p>
<p> 下面的参数-f是必须的 </p>
<p> -f: 使用档案名字，切记，这个参数是最后一个参数，后面只能接档案名。 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">tar -cf all.tar  .jpg </span><br><span class="line">这条命令是将所有.jpg的文件打成一个名为all.tar的包。-c是表示产生新的包，-f指定包的文件名。</span><br><span class="line">tar -rf all.tar  .gif </span><br><span class="line">这条命令是将所有.gif的文件增加到all.tar的包里面去。-r是表示增加文件的意思。</span><br><span class="line">tar -uf all.tar logo.gif </span><br><span class="line">这条命令是更新原来tar包all.tar中logo.gif文件，-u是表示更新文件的意思。</span><br><span class="line">tar -tf all.tar </span><br><span class="line">这条命令是列出all.tar包中所有文件，-t是列出文件的意思</span><br><span class="line">tar -xf all.tar </span><br><span class="line">这条命令是解出all.tar包中所有文件，-x是解开的意思</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">压缩</span></span><br><span class="line">tar –cvf jpg.tar  .jpg  将目录里所有jpg文件打包成tar.jpg</span><br><span class="line">tar –czf jpg.tar.gz  .jpg   将目录里所有jpg文件打包成jpg.tar后，并且将其用gzip压缩，生成一个gzip压缩过的包，命名为jpg.tar.gz</span><br><span class="line">tar –cjf jpg.tar.bz2  .jpg 将目录里所有jpg文件打包成jpg.tar后，并且将其用bzip2压缩，生成一个bzip2压缩过的包，命名为jpg.tar.bz2</span><br><span class="line">tar –cZf jpg.tar.Z  .jpg   将目录里所有jpg文件打包成jpg.tar后，并且将其用compress压缩，生成一个umcompress压缩过的包，命名为jpg.tar.Z</span><br><span class="line">rar a jpg.rar  .jpg rar格式的压缩，需要先下载rar for linux</span><br><span class="line">zip jpg.zip  .jpg   zip格式的压缩，需要先下载zip for linux </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">解压</span></span><br><span class="line">tar –xvf file.tar  解压 tar包</span><br><span class="line">tar -xzvf file.tar.gz 解压tar.gz</span><br><span class="line">tar -xjvf file.tar.bz2   解压 tar.bz2</span><br><span class="line">tar –xZvf file.tar.Z   解压tar.Z</span><br><span class="line">unrar e file.rar 解压rar</span><br><span class="line">unzip file.zip 解压zip</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">解压缩到指定目录</span></span><br><span class="line">tar -jxvf filename.tar.bz2 -C 欲解压的目录</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">总结</span></span><br><span class="line"> .tar 用 tar –xvf 解压</span><br><span class="line"> .gz 用 gzip -d或者gunzip 解压</span><br><span class="line"> .tar.gz和 .tgz 用 tar –xzf 解压</span><br><span class="line"> .bz2 用 bzip2 -d或者用bunzip2 解压</span><br><span class="line"> .tar.bz2用tar –xjf 解压</span><br><span class="line"> .Z 用 uncompress 解压</span><br><span class="line"> .tar.Z 用tar –xZf 解压</span><br><span class="line"> .rar 用 unrar e解压</span><br><span class="line"> .zip 用 unzip 解压</span><br></pre></td></tr></table></figure>



<h3 id="系统备份与恢复"><a href="#系统备份与恢复" class="headerlink" title="系统备份与恢复"></a>系统备份与恢复</h3><p> 初学者在使用Ubuntu这类Linux操作系统时，常常会由于不当操作导致系统崩溃，重装系统是难免的事情。重装系统虽然简单，但是各种软件&#x2F;环境重新下载、配置相当占用时间，因此有必要对系统同进行备份，以避免将来连哭的地方都找不到。本教程已经由JK小僧在计算机上亲自实践，可以恢复之前Ubuntu系统上的各类软件和环境配置，方法简单，值得推广： </p>
<h4 id="备份系统"><a href="#备份系统" class="headerlink" title="备份系统"></a>备份系统</h4><p> 使用TAR。和Windows不同，Linux不会限制root访问任何东西，你可以把分区上的所有东西都扔到一个TAR文件里去 </p>
<p> 打开一个终端，并运行 sudo su（回车后要求输入密码）； </p>
<p> 继续在终端中输入以下指令，进入系统根目录：<br> $ cd &#x2F; </p>
<p> 开始备份系统，在终端中输入： </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tar cvpzf backup.tgz --exclude=/proc --exclude=/lost+found --exclude=/backup.tgz --exclude=/mnt --exclude=/sys --exclude=/media /</span></span><br></pre></td></tr></table></figure>


<p> 1<br> 让我们来简单看一下这个命令： </p>
<p> ‘tar’ 是用来备份的程序<br> c - 新建一个备份文档<br> v - 详细模式， tar程序将在屏幕上实时输出所有信息。<br> p - 保存许可，并应用到所有文件。<br> z - 采用‘gzip’压缩备份文件，以减小备份文件体积。<br> f - 说明备份文件存放的路径， Ubuntu.tgz 是本例子中备份文件名。<br> “&#x2F;”是我们要备份的目录，在这里是整个文件系统。<br> 在档案文件名“backup.tgz”和要备份的目录名“&#x2F;”之间给出了备份时必须排除在外的目录。有些目录是无用的，例如“&#x2F;proc”、“&#x2F;lost+ found”、“&#x2F;sys”。当然，“backup.tgz”这个档案文件本身必须排除在外，否则你可能会得到一些超出常理的结果。如果不把“&#x2F;mnt”排除在外，那么挂载在“&#x2F;mnt”上的其它分区也会被备份。另外需要确认一下“&#x2F;media”上没有挂载任何东西(例如光盘、移动硬盘)，如果有挂载东西， 必须把“&#x2F;media”也排除在外.<br> 备份完成后，在文件系统的根目录将生成一个名为“backup.tgz”的文件，它的尺寸有可能非常大。现在你可以把它烧录到DVD上或者放到你认为安全的地方去。<br> 在备份命令结束时你可能会看到这样一个提示：’tar: Error exit delayed from previous errors’，多数情况下你可以忽略它。 </p>
<h4 id="恢复系统"><a href="#恢复系统" class="headerlink" title="恢复系统"></a>恢复系统</h4><p> 如果原来的Ubuntu系统已经崩溃，无法进入。则可以使用Ubuntu安装U盘（live USB）进入试用Ubuntu界面。 </p>
<p> 切换到root用户，找到之前Ubuntu系统的根目录所在磁盘分区（一般电脑上的磁盘分区（假设分区名称为sdaX）均可以在当前Ubuntu系统的根目录下的media目录下（即&#x2F;media）找到。目录通常为当前根目录下 cd &#x2F;media&#x2F;磁盘名称&#x2F;分区名称）。进入该分区，输入以下指令来删除该根目录下的所有文件：<br> $ sudo rm -rf &#x2F;media&#x2F;磁盘名称&#x2F;分区名称  </p>
<p> 将备份文件”backup.tgz”拷入该分区；<br> $ sudo cp -i backup.tgz &#x2F;media&#x2F;磁盘名&#x2F;分区名sdaX </p>
<p> 进入分区并将压缩文件解压缩，参数x是告诉tar程序解压缩备份文件。<br> $ sudo tar xvpfz backup.tgz </p>
<p> 重新创建那些在备份时被排除在外的目录；<br> $ sudo mkdir proc lost+found mnt sys media<br> 或者这样：<br> mkdir proc<br> mkdir lost+found<br> mkdir mnt<br> mkdir sys </p>
<p> 当你重启电脑，你会发现一切东西恢复到你创建备份时的样子了！ </p>
<p> 作者：JK-Ray<br> 来源：CSDN<br> 原文：<a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_27554409/article/details/78227496">https://blog.csdn.net/sinat_27554409/article/details/78227496</a><br> 版权声明：本文为博主原创文章，转载请附上博文链接！ </p>
<h2 id="3-8-lsmod"><a href="#3-8-lsmod" class="headerlink" title="3.8 lsmod"></a>3.8 lsmod</h2><p>   lsmod命令  用于显示已经加载到内核中的模块的状态信息。执行lsmod命令后会列出所有已载入系统的模块。Linux操作系统的核心具有模块化的特性，应此在编译核心时，务须把全部的功能都放入核心。您可以将这些功能编译成一个个单独的模块，待需要时再分别载入。 </p>
<h2 id="3-9-rmmod"><a href="#3-9-rmmod" class="headerlink" title="3.9 rmmod"></a>3.9 rmmod</h2><p>   rmmod命令  用于从当前运行的内核中移除指定的内核模块。执行rmmod指令，可删除不需要的模块。Linux操作系统的核心具有模块化的特性，应此在编译核心时，务须把全部的功能都放如核心。你可以将这些功能编译成一个个单独的模块，待有需要时再分别载入它们。 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-v：显示指令执行的详细信息；</span><br><span class="line">-f：强制移除模块，使用此选项比较危险；</span><br><span class="line">-w：等待着，直到模块能够被除时在移除模块；</span><br><span class="line">-s：向系统日志（syslog）发送错误信息。</span><br></pre></td></tr></table></figure>

<h2 id="3-10-modprobe"><a href="#3-10-modprobe" class="headerlink" title="3.10 modprobe"></a>3.10 modprobe</h2><p>   modprobe命令  用于智能地向内核中加载模块或者从内核中移除模块。modprobe可载入指定的个别模块，或是载入一组相依的模块。modprobe会根据<a target="_blank" rel="noopener" href="http://man.linuxde.net/depmod">depmod</a>所产生的相依关系，决定要载入哪些模块。若在载入过程中发生错误，在modprobe会卸载整组的模块。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-l或--list：显示可用的模块；</span><br><span class="line">-r或--remove：模块闲置不用时，即自动卸载模块；</span><br></pre></td></tr></table></figure>

<h2 id="3-11-strace"><a href="#3-11-strace" class="headerlink" title="3.11 strace"></a>3.11 strace</h2><p>   strace命令  是一个集诊断、调试、统计与一体的工具，我们可以使用strace对应用的系统调用和信号传递的跟踪结果来对应用进行分析，以达到解决问题或者是了解应用工作过程的目的。当然strace与专业的调试工具比如说<a target="_blank" rel="noopener" href="http://man.linuxde.net/gdb">gdb</a>之类的是没法相比的，因为它不是一个专业的调试器。 </p>
<p> strace的最简单的用法就是执行一个指定的命令，在指定的命令结束之后它也就退出了。在命令执行的过程中，strace会记录和解析命令进程的所有系统调用以及这个进程所接收到的所有的信号值 </p>
<h2 id="3-12-apt"><a href="#3-12-apt" class="headerlink" title="3.12 apt"></a>3.12 apt</h2><h3 id="更新源"><a href="#更新源" class="headerlink" title="更新源"></a>更新源</h3><p> 1、原文件备份 </p>
<p> sudo cp &#x2F;etc&#x2F;apt&#x2F;sources.list &#x2F;etc&#x2F;apt&#x2F;sources.list.bak </p>
<p> 2、编辑源列表文件 </p>
<p> sudo vim &#x2F;etc&#x2F;apt&#x2F;sources.list </p>
<p> 3、将原来的列表删除，添加如下内容（中科大镜像源） </p>
<p> deb <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/ubuntu/">http://mirrors.ustc.edu.cn/ubuntu/</a> xenial main restricted universe multiverse<br> deb <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/ubuntu/">http://mirrors.ustc.edu.cn/ubuntu/</a> xenial-security main restricted universe multiverse<br> deb <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/ubuntu/">http://mirrors.ustc.edu.cn/ubuntu/</a> xenial-updates main restricted universe multiverse<br> deb <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/ubuntu/">http://mirrors.ustc.edu.cn/ubuntu/</a> xenial-proposed main restricted universe multiverse<br> deb <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/ubuntu/">http://mirrors.ustc.edu.cn/ubuntu/</a> xenial-backports main restricted universe multiverse<br> deb-src <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/ubuntu/">http://mirrors.ustc.edu.cn/ubuntu/</a> xenial main restricted universe multiverse<br> deb-src <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/ubuntu/">http://mirrors.ustc.edu.cn/ubuntu/</a> xenial-security main restricted universe multiverse<br> deb-src <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/ubuntu/">http://mirrors.ustc.edu.cn/ubuntu/</a> xenial-updates main restricted universe multiverse<br> deb-src <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/ubuntu/">http://mirrors.ustc.edu.cn/ubuntu/</a> xenial-proposed main restricted universe multiverse<br> deb-src <a target="_blank" rel="noopener" href="http://mirrors.ustc.edu.cn/ubuntu/">http://mirrors.ustc.edu.cn/ubuntu/</a> xenial-backports main restricted universe multiverse </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt clean all</span><br><span class="line">apt update</span><br></pre></td></tr></table></figure>



<p> 4、运行sudo apt-get update </p>
<table>
<thead>
<tr>
<th>apt 命令</th>
<th>取代的命令</th>
<th>命令的功能</th>
</tr>
</thead>
<tbody><tr>
<td>apt install</td>
<td>apt-get install</td>
<td>安装软件包</td>
</tr>
<tr>
<td>apt remove</td>
<td>apt-get remove</td>
<td>移除软件包</td>
</tr>
<tr>
<td>apt purge</td>
<td>apt-get purge</td>
<td>移除软件包及配置文件</td>
</tr>
<tr>
<td>apt update</td>
<td>apt-get update</td>
<td>刷新存储库索引</td>
</tr>
<tr>
<td>apt upgrade</td>
<td>apt-get upgrade</td>
<td>升级所有可升级的软件包</td>
</tr>
<tr>
<td>apt autoremove</td>
<td>apt-get autoremove</td>
<td>自动删除不需要的包</td>
</tr>
<tr>
<td>apt full-upgrade</td>
<td>apt-get dist-upgrade</td>
<td>在升级软件包时自动处理依赖关系</td>
</tr>
<tr>
<td>apt search</td>
<td>apt-cache search</td>
<td>搜索应用程序</td>
</tr>
<tr>
<td>apt show</td>
<td>apt-cache show</td>
<td>显示装细节</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">搜索包名</span></span><br><span class="line">apt-cache search 软件包名</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看包详细信息</span></span><br><span class="line">apt-cache show 包名</span><br></pre></td></tr></table></figure>



<h2 id="3-13-v4l2"><a href="#3-13-v4l2" class="headerlink" title="3.13 v4l2"></a>3.13 v4l2</h2><p> 查看usb摄像头信息 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install v4l-utils</span><br><span class="line">v4l2-ctl -d /dev/video0 -all</span><br></pre></td></tr></table></figure>



<h2 id="3-14-ln"><a href="#3-14-ln" class="headerlink" title="3.14 ln"></a>3.14 ln</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">ln</span> [参数][源文件或目录][目标文件或目录]</span></span><br><span class="line"> ln -s log2013.log link2013</span><br></pre></td></tr></table></figure>

<h2 id="3-15-netstat"><a href="#3-15-netstat" class="headerlink" title="3.15 netstat"></a>3.15 netstat</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-a (all)显示所有选项，默认不显示LISTEN相关</span><br><span class="line">-t (tcp)仅显示tcp相关选项</span><br><span class="line">-u (udp)仅显示udp相关选项</span><br><span class="line">-n 拒绝显示别名，能显示数字的全部转化成数字。</span><br><span class="line">-l 仅列出有在 Listen (监听) 的服務状态</span><br><span class="line">-p 显示建立相关链接的程序名 pid</span><br><span class="line">-r 显示路由信息，路由表</span><br><span class="line">-e 显示扩展信息，例如uid等</span><br><span class="line">-s 按各个协议进行统计</span><br><span class="line">-c 每隔一个固定时间，执行该netstat命令。</span><br><span class="line"></span><br><span class="line">提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到</span><br></pre></td></tr></table></figure>

<p> 示例： </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">列出所有端口</span></span><br><span class="line">netstat -a</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">列出所有tcp端口</span> </span><br><span class="line">netstat -at</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">列出所有udp端口</span></span><br><span class="line">netstat -au</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">列出所有监听端口</span> </span><br><span class="line">netstat -l</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>当系统没有安装netstat</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash:netstat:command not found</span><br></pre></td></tr></table></figure>

<p> 说明没有安装netstat，该工具在  net-tools  包中。 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install net-tools</span><br></pre></td></tr></table></figure>

<p>该包中还包含arp，ifconfig，netstat，rarp，nameif和route几个工具。</p>
<h2 id="3-16-挂载优盘"><a href="#3-16-挂载优盘" class="headerlink" title="3.16 挂载优盘"></a>3.16 挂载优盘</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看优盘挂载情况</span></span><br><span class="line">df -h</span><br></pre></td></tr></table></figure>



<h1 id="4-网络"><a href="#4-网络" class="headerlink" title="4. 网络"></a>4. 网络</h1><h1 id="5-samba"><a href="#5-samba" class="headerlink" title="5.samba"></a>5.samba</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装</span></span><br><span class="line">sudo apt-get install samba smbclient</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建文件夹</span></span><br><span class="line">mkdir share</span><br><span class="line">chmod 777 share</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加用户并设置密码</span></span><br><span class="line">sudo smbpasswd -a zhang</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">配置文件</span></span><br><span class="line">sudo vi /etc/samba/smb.conf </span><br><span class="line">[share]</span><br><span class="line">   comment = share folder</span><br><span class="line">   browseable = yes</span><br><span class="line">   path = /home/zhang/share</span><br><span class="line">   create mask = 0777</span><br><span class="line">   directory mask = 0777</span><br><span class="line">   valid users = zhang</span><br><span class="line">   force user = nobody</span><br><span class="line">   force group = nogroup</span><br><span class="line">   public = yes</span><br><span class="line">   available = yes</span><br><span class="line">   writable = yes</span><br><span class="line">   </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启</span></span><br><span class="line">sudo /etc/init.d/smaba restart</span><br></pre></td></tr></table></figure>



<h1 id="6-mv代替rm"><a href="#6-mv代替rm" class="headerlink" title="6.mv代替rm"></a>6.mv代替rm</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1. 在/home目录下新建两个目录，命名为：.trash，tools</span><br><span class="line">2. 在/home/tools/目录下，新建一个shell文件，命名为： remove.sh</span><br><span class="line"></span><br><span class="line">PARA_CNT=$#</span><br><span class="line">TRASH_DIR=&quot;/home/ding/.trash&quot;</span><br><span class="line"></span><br><span class="line">for i in $ ; do</span><br><span class="line">    STAMP=`date +%s`</span><br><span class="line">    fileName=`basename $i`</span><br><span class="line">    mv $i $TRASH_DIR/$fileName.$STAMP</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">3. 修改~/.bashrc， 增加一行</span><br><span class="line">alias rm=&quot;sh /home/ding/tools/remove.sh&quot;</span><br><span class="line">用我们自建的remove.sh替代rm命令</span><br></pre></td></tr></table></figure>

<h1 id="7-交叉编译"><a href="#7-交叉编译" class="headerlink" title="7.交叉编译"></a>7.交叉编译</h1><h2 id="7-1-修改Makefile"><a href="#7-1-修改Makefile" class="headerlink" title="7.1 修改Makefile"></a>7.1 修改Makefile</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">obj-m := whois_usbcam.o</span><br><span class="line">modules-objs:= whois_usbcam.o</span><br><span class="line"></span><br><span class="line">CROSS_COMPILE := aarch64-linux-gnu-</span><br><span class="line">ARCH := arm64</span><br><span class="line">CC:= $(CROSS_COMPILE)gcc</span><br><span class="line">LD:= $(CROSS_COMPILE)ld</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">KDIR := /lib/modules/$(shell <span class="built_in">uname</span> -r)/build</span></span><br><span class="line">KDIR := /home/long/share/linux/kernel</span><br><span class="line"></span><br><span class="line">PWD := $(shell pwd)</span><br><span class="line"></span><br><span class="line">default:</span><br><span class="line">        make -C $(KDIR) M=$(PWD) modules</span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">        rm -rf *.o *.cmd *.ko *.mod.c .tmp_versions</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="7-2-file查看文件信息"><a href="#7-2-file查看文件信息" class="headerlink" title="7.2 file查看文件信息"></a>7.2 file查看文件信息</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">file查看文件信息</span></span><br><span class="line">file whois.ko</span><br><span class="line"></span><br><span class="line">firefly@firefly:~/tools$ file whois_usbcam.ko</span><br><span class="line">whois_usbcam.ko: ELF 64-bit LSB relocatable, ARM aarch64, version 1 (SYSV), BuildID[sha1]=0e8ab689b4087070c62c8b8bf56b947dcfb09a20, with debug_info, not stripped</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">linux modinfo命令用于显示kernel模块的信息。</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">modinfo会显示kernel模块的对象文件，以显示该模块的相关信息。</span></span><br><span class="line"></span><br><span class="line">firefly@firefly:~/tools$ modinfo whois_usbcam.ko</span><br><span class="line">filename:       /home/firefly/tools/whois_usbcam.ko</span><br><span class="line">license:        GPL</span><br><span class="line">srcversion:     5BD076F500BC191FA29FD8C</span><br><span class="line">alias:          usb:v0547p1002d*dc*dsc*dp*ic*isc*ip*in*</span><br><span class="line">depends:</span><br><span class="line">vermagic:       4.4.167+ SMP mod_unload aarch64</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="8-驱动编译"><a href="#8-驱动编译" class="headerlink" title="8.驱动编译"></a>8.驱动编译</h1><h2 id="8-1-kernel内核"><a href="#8-1-kernel内核" class="headerlink" title="8.1 kernel内核"></a>8.1 kernel内核</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看当前内核版本,linux-source-5.3.0</span></span><br><span class="line">uname -r</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看内核代码并下载合适的版本</span></span><br><span class="line">sudo apt search linux-source*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">make menuconfig</span></span><br><span class="line">make prepare</span><br><span class="line">make scripts</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看ko模块文件信息</span></span><br><span class="line">modinfo whois_usbcam.ko</span><br><span class="line"></span><br><span class="line">filename:       /home/ding/share/driver/whois_usbcam.ko</span><br><span class="line">license:        GPL</span><br><span class="line">srcversion:     B25AA645191D16E0EED1E65</span><br><span class="line">alias:          usb:v0547p1002d*dc*dsc*dp*ic*isc*ip*in*</span><br><span class="line">depends:</span><br><span class="line">retpoline:      Y</span><br><span class="line">name:           whois_usbcam</span><br><span class="line">vermagic:       5.3.18 SMP mod_unload</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>8.2 内核模块相关命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">insmod	装载模块到当前运行的内核中</span><br><span class="line">rmmod	从当前运行的内核中卸载模块</span><br><span class="line">lsmod	显示当前内核已加装的模块信息</span><br><span class="line">modinfo	检查与内核模块相关联的目标文件，并打印出所有得到的信息</span><br><span class="line">modprobe	利用 depmod 创建的依赖关系文件自动加载相关的模块</span><br><span class="line">depmod	创建一个内核可装载模块的依赖关系文件，modprobe 用它来自动加载模块</span><br></pre></td></tr></table></figure>





<h1 id="111-问题解决："><a href="#111-问题解决：" class="headerlink" title="111. 问题解决："></a>111. 问题解决：</h1><h2 id="1-运行arm-linux-gcc命令，提示No-such-file-or-directory”的问题"><a href="#1-运行arm-linux-gcc命令，提示No-such-file-or-directory”的问题" class="headerlink" title="1.运行arm-linux-gcc命令，提示No such file or directory”的问题"></a>1.运行arm-linux-gcc命令，提示No such file or directory”的问题</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">本人的ubuntu是64位，而下载的这些交叉编译器是32位的。因此需要安装ia32-libs库，如果apt-get 搜不到这个库的话，可以安装lib32ncurses5库，也是一样的。本人安装了后者，解决了该问题。</span><br></pre></td></tr></table></figure>

<h2 id="2-ubuntu安装后-启动root用户"><a href="#2-ubuntu安装后-启动root用户" class="headerlink" title="2.ubuntu安装后,启动root用户"></a>2.ubuntu安装后,启动root用户</h2><p> ubuntu安装后，默认没有启动root用户，启动root账户使用一下命令 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd root</span><br></pre></td></tr></table></figure>

<p> su root，是否可以进入root用户，如果出现前面root@用户名，就说明设置root用户的密码成功。 </p>
<h2 id="3-修改debian系统语言"><a href="#3-修改debian系统语言" class="headerlink" title="3.修改debian系统语言"></a>3.修改debian系统语言</h2><p> 修改&#x2F;etc&#x2F;default&#x2F;locale 文件里，注意，有#号的要去掉。 </p>
<p> LANG&#x3D;”zh_CN.UTF-8” </p>
<p> LANGUAGE&#x3D;”zh_CN:zh” </p>
<p> 修改为下面内容。 </p>
<p> LANG&#x3D;”en_US.UTF-8” </p>
<p> LANGUAGE&#x3D;”en_US:en” </p>
<p> 在使用的过程中有报错话，那是因为英文包没有被安装，使用下面的命令 </p>
<p> dpkg-reconfigure locales </p>
<p> 选择en_US.UTF-8。。。用空格选中，不要直接敲回车。 </p>
<p> 选择好之后 重启，在系统设置（GNOME，装了）勾一下英文，重启就好了 </p>
<h2 id="4-fcitx中文输入法配置"><a href="#4-fcitx中文输入法配置" class="headerlink" title="4.fcitx中文输入法配置"></a>4.fcitx中文输入法配置</h2><p> fcitx-configtool </p>
<p>4.4.179-gc94e5b5011b7-dirty</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/damei6677/linux/linux-1.html" data-id="clji7crpu00146s4lf1rl97gp" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/06/">June 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2023/06/30/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/blog/js/jquery-3.6.4.min.js"></script>



  
<script src="/blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/blog/js/script.js"></script>





  </div>
</body>
</html>