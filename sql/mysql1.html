<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="ubuntu16.04安装安装之后只能root账户登录 1234567891011#ubuntu16.04安装apt install mariadb-server#centos安装sudo yum install mariadb-server#开启服务systemctl start mariadb#设置为开机启动systemctl enable mariadb 配置 123456789101112">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://github.com/damei6677/sql/mysql1.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="ubuntu16.04安装安装之后只能root账户登录 1234567891011#ubuntu16.04安装apt install mariadb-server#centos安装sudo yum install mariadb-server#开启服务systemctl start mariadb#设置为开机启动systemctl enable mariadb 配置 123456789101112">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2022/png/1661392/1647658837335-7a1a7f15-6761-4f6f-9cd4-870b22575bed.png#averageHue=%232a2624&clientId=uc3eb504d-5349-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=61&id=u3410f4d3&margin=%5Bobject%20Object%5D&name=image.png&originHeight=61&originWidth=610&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8432&status=done&style=none&taskId=u2655347a-1d21-45cf-b005-1fdc734824d&title=&width=610">
<meta property="og:image" content="https://github.com/blog/mariadb1.assets/image-20221117100033746.png">
<meta property="og:image" content="https://github.com/blog/mariadb1.assets/1647657934718-2a0ee483-0ff7-4fb2-bbfe-19d1d6dde82b.png">
<meta property="og:image" content="https://github.com/blog/mariadb1.assets/image-20221117100637567.png">
<meta property="og:image" content="https://github.com/blog/mariadb1.assets/image-20221117101434022.png">
<meta property="article:published_time" content="2023-03-28T06:06:11.695Z">
<meta property="article:modified_time" content="2023-03-28T06:06:11.695Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2022/png/1661392/1647658837335-7a1a7f15-6761-4f6f-9cd4-870b22575bed.png#averageHue=%232a2624&clientId=uc3eb504d-5349-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=61&id=u3410f4d3&margin=%5Bobject%20Object%5D&name=image.png&originHeight=61&originWidth=610&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8432&status=done&style=none&taskId=u2655347a-1d21-45cf-b005-1fdc734824d&title=&width=610">
  
    <link rel="alternate" href="/blog/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/blog/css/style.css">

  
    
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/blog/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/damei6677"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="page-" class="h-entry article article-type-page" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/sql/mysql1.html" class="article-date">
  <time class="dt-published" datetime="2023-03-28T06:06:11.695Z" itemprop="datePublished">2023-03-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="ubuntu16-04安装"><a href="#ubuntu16-04安装" class="headerlink" title="ubuntu16.04安装"></a>ubuntu16.04安装</h1><p>安装之后只能root账户登录</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#ubuntu16.04安装</span><br><span class="line">apt install mariadb-server</span><br><span class="line"></span><br><span class="line">#centos安装</span><br><span class="line">sudo yum install mariadb-server</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#开启服务</span><br><span class="line">systemctl start mariadb</span><br><span class="line">#设置为开机启动</span><br><span class="line">systemctl enable mariadb</span><br></pre></td></tr></table></figure>
<p>配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">数据库配置</span></span><br><span class="line">sudo mysql_secure_installation</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">配置时各个选项</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">输入数据库超级管理员root的密码(注意不是系统root的密码)，第一次进入还没有设置密码则直接回车</span></span><br><span class="line">Enter current password for root (enter for none):  </span><br><span class="line">Set root password? [Y/n]  # 设置密码，y</span><br><span class="line">New password:  # 新密码</span><br><span class="line">Re-enter new password:  # 再次输入密码</span><br><span class="line">Remove anonymous users? [Y/n]  # 移除匿名用户， y</span><br><span class="line">Disallow root login remotely? [Y/n] </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">拒绝root远程登录，n，不管y/n，都会拒绝root远程登录</span></span><br><span class="line">Remove test database and access to it? [Y/n] </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除<span class="built_in">test</span>数据库，y：删除。n：不删除，数据库中会有一个<span class="built_in">test</span>数据库，一般不需要</span></span><br><span class="line">Reload privilege tables now? [Y/n]  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重新加载权限表，y。或者重启服务也许</span></span><br></pre></td></tr></table></figure>
<h1 id="图形化管理工具"><a href="#图形化管理工具" class="headerlink" title="图形化管理工具"></a>图形化管理工具</h1><p>mysql-workbench<br>DBeaver</p>
<p>PDman</p>
<p>power designer</p>
<h1 id="远程访问"><a href="#远程访问" class="headerlink" title="远程访问"></a>远程访问</h1><p>使用命令测试<br>mysql -h 192.168.0.xxx -u root -p<br><img src="https://cdn.nlark.com/yuque/0/2022/png/1661392/1647658837335-7a1a7f15-6761-4f6f-9cd4-870b22575bed.png#averageHue=%232a2624&clientId=uc3eb504d-5349-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=61&id=u3410f4d3&margin=%5Bobject%20Object%5D&name=image.png&originHeight=61&originWidth=610&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8432&status=done&style=none&taskId=u2655347a-1d21-45cf-b005-1fdc734824d&title=&width=610" alt="image.png"><br>Enter password:ERROR1130(HY000): Host’192.168.0.xxx’isnotallowedtoconnecttothis MariaDB server</p>
<p>解决方案：需要将用户权限分配给各个远程用户<br>登录mysql服务器，使用grant命令分配权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">grant all on *.* to <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;密码&#x27;</span>;</span></span><br><span class="line"></span><br><span class="line">grant all on *.* to &#x27;ding&#x27;@&#x27;%&#x27; identified by &#x27;ding&#x27;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<p>这样即可远程访问了。</p>
<h2 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h2><p><img src="/blog/mariadb1.assets/image-20221117100033746.png" alt="image-20221117100033746"></p>
<p>解决方法：</p>
<p>1 确认mysql是否运行。</p>
<p>2 查看3306端口是否开启。</p>
<p>2.1 如果Ubuntu有设置防火墙或者iptables规则的话，请允许指定端口号访问。<br>2.2 判断3306端口是否打开。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看端口在哪个ip上面被监听。</span></span><br><span class="line">netstat -an | grep 3306</span><br></pre></td></tr></table></figure>



<p><img src="/blog/mariadb1.assets/1647657934718-2a0ee483-0ff7-4fb2-bbfe-19d1d6dde82b.png" alt="image.png"></p>
<p>从上面结果可以看出3306端口只在IP 127.0.0.1 上监听，所以拒绝了其他IP的访问。<br>解决方案：<br>修改&#x2F;etc&#x2F;mysql&#x2F;my.cnf文件,或者&#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;mysqld.cnf<br>找到下面内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Instead of skip-networking thed efault is now to listen only on</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">localhost <span class="built_in">which</span> is more compatible and is not less secure.</span></span><br><span class="line">bind-address            =127.0.0.1</span><br></pre></td></tr></table></figure>

<p>将上面这一行注释掉<del>或者把127.0.0.1换成合适的IP，</del>建议注释掉。<br>重新启动后，重新使用netstat检测。</p>
<p><img src="/blog/mariadb1.assets/image-20221117100637567.png" alt="image-20221117100637567"></p>
<p>3 确认root用户有没有权限从当前主机访问目标主机。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">测试从远程访问mysql</span></span><br><span class="line">mysql -h 172.17.15.4 -u root -p</span><br></pre></td></tr></table></figure>

<p><img src="/blog/mariadb1.assets/image-20221117101434022.png" alt="image-20221117101434022"></p>
<p>ERROR CODE 1130.</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_28545605/article/details/125017610">https://blog.csdn.net/qq_28545605/article/details/125017610</a></p>
<p>4 确认密码是否正确。</p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a><strong>登录</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u username -p (输入密码)</span><br></pre></td></tr></table></figure>

<h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a><strong>用户管理</strong></h2><h3 id="修改root密码"><a href="#修改root密码" class="headerlink" title="修改root密码"></a><strong>修改root密码</strong></h3><p>新安装mysql软件root帐号没有密码，需要手动新建密码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysqladmin -u root -p password 输入新密码即可.</span><br></pre></td></tr></table></figure>


<h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a><strong>创建用户</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#新建账户</span><br><span class="line">create user &#x27;laowang&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;laowang&#x27;;</span><br><span class="line">#赋予权限</span><br><span class="line">grant all privileges on test.* to &#x27;laowang&#x27;@&#x27;%&#x27;;</span><br><span class="line">#显示用户权限</span><br><span class="line">show grants for &#x27;laowang&#x27;@&#x27;%&#x27;;</span><br><span class="line">#刷新</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h3 id="撤销用户权限"><a href="#撤销用户权限" class="headerlink" title="撤销用户权限"></a><strong>撤销用户权限</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">REVOKE privilege ON databasename.tablename FROM &#x27;username&#x27;@&#x27;host&#x27;;</span><br></pre></td></tr></table></figure>


<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a><strong>删除用户</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#删除用户</span><br><span class="line">delete from user where User=&#x27;username&#x27; and Host=&#x27;localhost&#x27;;</span><br><span class="line">#刷新权限表</span><br><span class="line">flush privileges;</span><br><span class="line">#删除数据库</span><br><span class="line">drop database testDB;</span><br><span class="line">#删除用户及权限</span><br><span class="line">drop user username@&#x27;%&#x27;;</span><br><span class="line">drop user username@localhost;</span><br></pre></td></tr></table></figure>

<h3 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a><strong>修改密码</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#修改用户密码</span><br><span class="line">update mysql.user set password=password(&#x27;newpassword&#x27;) where User=&#x27;username&#x27; and Host=&#x27;localhost&#x27;;  </span><br><span class="line">#</span><br><span class="line">set password for &#x27;username&#x27;@&#x27;host&#x27; = password(&#x27;newpassword&#x27;);</span><br><span class="line">#刷新权限</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>

<h3 id="查看用户当前权限"><a href="#查看用户当前权限" class="headerlink" title="查看用户当前权限"></a>查看用户当前权限</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> mysql.user <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;ding&#x27;</span>\G;</span><br></pre></td></tr></table></figure>
<h2 id="3-查看当前状态"><a href="#3-查看当前状态" class="headerlink" title="3.查看当前状态"></a><strong>3.查看当前状态</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">status;</span><br></pre></td></tr></table></figure>

<h2 id="4-启动服务"><a href="#4-启动服务" class="headerlink" title="4.启动服务"></a><strong>4.启动服务</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mini ~]# systemctl start mariadb  # 开启服务</span><br><span class="line">[root@mini ~]# systemctl enable mariadb  # 设置为开机自启动服务</span><br></pre></td></tr></table></figure>


<h1 id="连接错误编码"><a href="#连接错误编码" class="headerlink" title="连接错误编码"></a><strong>连接错误编码</strong></h1><h2 id="1045"><a href="#1045" class="headerlink" title="1045"></a><strong>1045</strong></h2><p>该用户没有远程登录权限，需要添加该权限。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on qingdb.* to &#x27;qing&#x27;@&#x27;%&#x27; identified by &#x27;aaaaaa&#x27;;</span><br></pre></td></tr></table></figure>

<h2 id="1130"><a href="#1130" class="headerlink" title="1130"></a>1130</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">host ‘’ is not allowed to connect to this Mysql server</span><br></pre></td></tr></table></figure>

<p>host不允许访问。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_28545605/article/details/125017610">https://blog.csdn.net/qq_28545605/article/details/125017610</a></p>
<h2 id="1698"><a href="#1698" class="headerlink" title="1698"></a><strong>1698</strong></h2><p>查看一下user表，错误的起因就是在这里， root的plugin被修改成了auth_socket，用密码登陆的plugin应该是mysql_native_password。<br>只要把auth_socket改成mysql_native_password就行了：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update mysql.user set authentication_string=PASSWORD(&#x27;111111&#x27;), </span><br><span class="line">plugin=&#x27;mysql_native_password&#x27; where user=&#x27;root&#x27;;</span><br></pre></td></tr></table></figure>


<h2 id="2003-远程连接失败"><a href="#2003-远程连接失败" class="headerlink" title="2003 远程连接失败"></a><strong>2003 远程连接失败</strong></h2><p>mysql远程连接失败（错误码：2003）。<br>用”vim my.cnf”命令查看my.cnf文件(在MySQL安装目录下，我的位置是&#x2F;etc&#x2F;mysql&#x2F;my.cnf),修改其对应的值并重启MySQL。<br>添加对应内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#/etc/mysql/my.cnf</span><br><span class="line">[mysqld]</span><br><span class="line">bind-address = 0.0.0.0  # 表示允许任何主机登陆MySQL</span><br><span class="line">port=3306               # 表示MySQL运行端口为3306</span><br></pre></td></tr></table></figure>

<p>重起服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sytemctl restart mariadb</span><br></pre></td></tr></table></figure>

<p>如果还不行，关闭防火墙</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure>

<p>如果不想关闭防火墙，但是想允许3306端口通过。可以设置防火墙。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#centos</span><br><span class="line">[root@mini ~]# firewall-cmd --query-port=3306/tcp  # 查看3306端口是否开启</span><br><span class="line">no</span><br><span class="line">[root@mini ~]# firewall-cmd --zone=public --add-port=3306/tcp --permanent  # 开启3306端口</span><br><span class="line">success</span><br><span class="line">[root@mini ~]# firewall-cmd --reload  # 重启防火墙</span><br><span class="line">success</span><br><span class="line">[root@mini ~]# firewall-cmd --query-port=3306/tcp  # 查看3306端口是否开启</span><br><span class="line">yes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ubuntu </span><br><span class="line">#查看防火墙当前状态</span><br><span class="line">sudo ufw status</span><br><span class="line">#开启防火墙</span><br><span class="line">sudo ufw enable</span><br><span class="line">#关闭防火墙</span><br><span class="line">sudo ufw disable</span><br><span class="line">#查看防火墙版本</span><br><span class="line">sudo ufw version</span><br><span class="line">#默认允许外部访问本机</span><br><span class="line">sudo ufw default allow</span><br><span class="line">#默认拒绝外部访问主机</span><br><span class="line">sudo ufw default deny</span><br><span class="line">#允许外部访问53端口</span><br><span class="line">sudo ufw allow 53</span><br><span class="line">#拒绝外部访问53端口</span><br><span class="line">sudo ufw deny 53</span><br><span class="line">#允许某个IP地址访问本机所有端口</span><br><span class="line">sudo ufw allow from 192.168.0.1</span><br></pre></td></tr></table></figure>

<h2 id="10061-连接错误"><a href="#10061-连接错误" class="headerlink" title="10061 连接错误"></a><strong>10061 连接错误</strong></h2><p>1.数据库中查看用户是否有远程登录的权限。<br>select user,host form mysql.user;	如果没有‘%’权限，则添加。<br>grant all privileges on qingdb.* to ‘qing‘@’%’ identified by ‘aaaaaa’;<br>2.查看配置文件<br>root@debian:&#x2F;home&#x2F;zhaomin# cat &#x2F;etc&#x2F;mysql&#x2F;my.cnf<br>The MariaDB configuration file</p>
<p>The MariaDB&#x2F;MySQL tools read configuration files in the following order:</p>
<ol>
<li><p>“&#x2F;etc&#x2F;mysql&#x2F;mariadb.cnf” (this file) to set global defaults,</p>
</li>
<li><p>“&#x2F;etc&#x2F;mysql&#x2F;conf.d&#x2F;*.cnf” to set global options.</p>
</li>
<li><p>“&#x2F;etc&#x2F;mysql&#x2F;mariadb.conf.d&#x2F;*.cnf” to set MariaDB-only options.</p>
</li>
<li><p>“~&#x2F;.my.cnf” to set user-specific options.</p>
<p> 查看mariadb将读取的配置文件。<br> 在文件中添加：</p>
</li>
</ol>
<p>[mysqld]<br>bind-address &#x3D; 0.0.0.0	然后重启服务</p>
<h1 id="操作"><a href="#操作" class="headerlink" title="操作"></a><strong>操作</strong></h1><h2 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a><strong>数据库操作</strong></h2><h2 id="导入数据库结构"><a href="#导入数据库结构" class="headerlink" title="导入数据库结构"></a><strong>导入数据库结构</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use databasename;</span><br><span class="line">source /home/xing/bbq.sql;</span><br></pre></td></tr></table></figure>

<h2 id="导出数据库结构及数据"><a href="#导出数据库结构及数据" class="headerlink" title="导出数据库结构及数据"></a><strong>导出数据库结构及数据</strong></h2><h3 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a><strong>修改表结构</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#--修改表名</span><br><span class="line">alter table old_name rename new_name; </span><br><span class="line">#--添加表列 </span><br><span class="line">alter table tb_test add column add_name varchar(10);</span><br><span class="line">#--删除表列</span><br><span class="line">alter table tb_test drop column del_name;</span><br><span class="line">#--修改表列类型    </span><br><span class="line">alter table tb_test modify address char(10)</span><br><span class="line">#--修改表列名</span><br><span class="line">alter table test change column address address1 varchar(30)</span><br></pre></td></tr></table></figure>


<h2 id="显示数据表结构"><a href="#显示数据表结构" class="headerlink" title="**显示数据表结构  **"></a>**显示数据表结构  **</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">describe tablename;</span><br></pre></td></tr></table></figure>

<h2 id="删除数据库和数据表"><a href="#删除数据库和数据表" class="headerlink" title="删除数据库和数据表"></a><strong>删除数据库和数据表</strong></h2><p>1、当你不再需要该表时， 用 drop;<br>2、当你仍要保留该表，但要删除所有记录时， 用 truncate;<br>3、当你要删除部分记录时， 用 delete。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#删除表内数据，用 delete。格式为：</span><br><span class="line">delete from 表名 where 删除条件;</span><br><span class="line">#实例：删除学生表内姓名为张三的记录。</span><br><span class="line">delete from  student where  T_name = &quot;张三&quot;;</span><br><span class="line">#清除表内数据，保存表结构，用 truncate。格式为：</span><br><span class="line">truncate table 表名;</span><br><span class="line">#实例：清除学生表内的所有数据。</span><br><span class="line">truncate  table  student;</span><br><span class="line">#删除表用 drop，就是啥都没了。格式为：  </span><br><span class="line">drop  table  表名;</span><br><span class="line">#实例：删除学生表。</span><br><span class="line">drop table student;</span><br></pre></td></tr></table></figure>


<h2 id="查看数据库大小"><a href="#查看数据库大小" class="headerlink" title="查看数据库大小"></a><strong>查看数据库大小</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;use qingdb;</span><br><span class="line">&gt;select concat(round(sum(data_length/1024/1024),2),&#x27;MB&#x27;) as data from tables;+----------+  </span><br><span class="line">| data     |  </span><br><span class="line">+----------+  </span><br><span class="line">| 123.68MB |  </span><br><span class="line">+----------+  </span><br><span class="line">1 row in set (0.36 sec)</span><br></pre></td></tr></table></figure>


<h1 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a><strong>关键字</strong></h1><h2 id="as"><a href="#as" class="headerlink" title="**as **"></a>**as **</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#as可以理解为：用作、当成、作为，一般是重命名列名或者表名。主要是为了数据显示，方便查看.</span><br><span class="line">#（1）重命名列</span><br><span class="line">select name as column1,age as column_2 from tablename;	</span><br><span class="line">#查询tablename表中的两列，显示时重新命名。</span><br><span class="line">#（2）重命名表名</span><br><span class="line">select b.name,b.age,c.homeaddrfrom tablename as b left join ctablename as c on b.id = c.id;	</span><br><span class="line">#多用在多表联合查询。</span><br><span class="line">#tablename重命名为b，那么列名可以用新的表名来提领与其他表区分。</span><br><span class="line">#（3）可以做为连接语句的连接符</span><br><span class="line">create table tablename as select * from tablename2;	</span><br><span class="line">#上面语句的意思就是先获取到tablename表中的所有记录，之后创建一张tablename表，结构和tablename2表相同，记录为后面语句的查询结果。</span><br><span class="line">show</span><br><span class="line">查看表create语句</span><br><span class="line">show create table tablename;</span><br></pre></td></tr></table></figure>


<h1 id="在线测试数据库"><a href="#在线测试数据库" class="headerlink" title="在线测试数据库"></a><strong>在线测试数据库</strong></h1><h2 id="sql107-ccaeo-com"><a href="#sql107-ccaeo-com" class="headerlink" title="sql107.ccaeo.com"></a><strong>sql107.ccaeo.com</strong></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">【以下是您的空间账号信息：】</span><br><span class="line">| 控制面板地址：http://cpanel.ccaeo.com</span><br><span class="line">| 用户名：cca_23603612</span><br><span class="line">| 密码：yingge2017</span><br><span class="line">|【Ftp账号信息如下：】</span><br><span class="line">| ftp地址：ftp.ccaeo.com</span><br><span class="line">| ftp账号：cca_23603612</span><br><span class="line">| ftp密码：yingge2017</span><br><span class="line">|【以下是你的数据库信息：】</span><br><span class="line">| MYSQL账号：请进入控制面板自行创建</span><br><span class="line">| MYSQL用户名：cca_23603612</span><br><span class="line">|</span><br><span class="line">| MYSQL密码：yingge2017</span><br><span class="line">|</span><br><span class="line">| MYSQL服务器地址：请进入控制面板查看</span><br><span class="line">|</span><br><span class="line">|【您的域名信息：】</span><br><span class="line">|</span><br><span class="line">| 您的免费二级域名：http://yingge2017.ccaeo.com</span><br><span class="line">|</span><br><span class="line">| 您的注册邮箱：1239877983@qq.com</span><br><span class="line">|</span><br><span class="line">| 您安装的程序信息：</span><br><span class="line">| 注：如果您在申请账号的过程中选择了在线安装程序，您的程序账号密码信息显示，否则将为空，可自行通过ftp或者控制面板文件在线管理工具上传您的程序进行安装。</span><br><span class="line">|MySQL Host Name ：sql107.ccaeo.com</span><br><span class="line">MySQL User Name：cca_23603612</span><br><span class="line">MySQL Password：yingge2017</span><br><span class="line">MySQL DB Name：cca_23603612_yinggedb</span><br></pre></td></tr></table></figure>


<h2 id="db4free-net"><a href="#db4free-net" class="headerlink" title="db4free.net"></a><strong>db4free.net</strong></h2><p>访问域名为：db4free.net<br>端口为：3306<br>数据库: dalongdb<br>用户名: dalong<br>pwd:dalongdalong</p>
<h2 id="Email-1239877983-qq-com"><a href="#Email-1239877983-qq-com" class="headerlink" title="Email: 1239877983@qq.com"></a>Email: <a href="1239877983@qq.com">1239877983@qq.com</a></h2><h2 id="freesqldatabase-com"><a href="#freesqldatabase-com" class="headerlink" title="freesqldatabase.com"></a><strong>freesqldatabase.com</strong></h2><p>zzxx6265<br>Your account number is: 340147<br>Your new database is now ready to use.<br>To connect to your database use these details;<br>Host: sql12.freesqldatabase.comDatabase name: sql12283383Database user: sql12283383Database password: XBVJKRNJqyPort number: 3306</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/damei6677/sql/mysql1.html" data-id="clji7crq1001n6s4l3fqeh2uw" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2023/06/">June 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2023/06/30/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/blog/js/jquery-3.6.4.min.js"></script>



  
<script src="/blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/blog/js/script.js"></script>





  </div>
</body>
</html>